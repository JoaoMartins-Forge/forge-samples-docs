<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.5">
<title data-react-helmet="true">Browsing Hubs | Another Way to Learn Forge</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://petrbroz.github.io/forge-samples-docs/docs/tutorials/hubs-browser/dotnet/hubs"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Browsing Hubs | Another Way to Learn Forge"><meta data-react-helmet="true" name="description" content="In this step we&#x27;ll extend our server so that we can browse the content of 3rd party"><meta data-react-helmet="true" property="og:description" content="In this step we&#x27;ll extend our server so that we can browse the content of 3rd party"><link data-react-helmet="true" rel="shortcut icon" href="/forge-samples-docs/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://petrbroz.github.io/forge-samples-docs/docs/tutorials/hubs-browser/dotnet/hubs"><link data-react-helmet="true" rel="alternate" href="https://petrbroz.github.io/forge-samples-docs/docs/tutorials/hubs-browser/dotnet/hubs" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://petrbroz.github.io/forge-samples-docs/cz/docs/tutorials/hubs-browser/dotnet/hubs" hreflang="cz"><link data-react-helmet="true" rel="alternate" href="https://petrbroz.github.io/forge-samples-docs/docs/tutorials/hubs-browser/dotnet/hubs" hreflang="x-default"><link rel="stylesheet" href="/forge-samples-docs/assets/css/styles.a184e554.css">
<link rel="preload" href="/forge-samples-docs/assets/js/runtime~main.4eea0c2a.js" as="script">
<link rel="preload" href="/forge-samples-docs/assets/js/main.e5d50793.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/forge-samples-docs/"><img src="/forge-samples-docs/img/logo.png" alt="Autodesk Forge" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/forge-samples-docs/img/logo.png" alt="Autodesk Forge" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Another Way to Learn Forge</b></a><a class="navbar__item navbar__link navbar__link--active" href="/forge-samples-docs/docs/intro">Tutorials</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__link"><span><svg viewBox="0 0 20 20" width="20" height="20" aria-hidden="true" class="iconLanguage_3vod"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>en</span></span></a><ul class="dropdown__menu"><li><a href="/forge-samples-docs/docs/tutorials/hubs-browser/dotnet/hubs" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" style="text-transform:capitalize">en</a></li><li><a href="/forge-samples-docs/cz/docs/tutorials/hubs-browser/dotnet/hubs" target="_self" rel="noopener noreferrer" class="dropdown__link" style="text-transform:capitalize">cz</a></li></ul></div><a href="https://github.com/petrbroz/forge-samples-docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/forge-samples-docs/docs/intro">Getting Started</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Environment Setup</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Tutorials</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Simple Viewer</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Hubs Browser</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/forge-samples-docs/docs/tutorials/hubs-browser/index">Introduction</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Node.js</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">.NET</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/forge-samples-docs/docs/tutorials/hubs-browser/dotnet/server">Basic Server</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/forge-samples-docs/docs/tutorials/hubs-browser/dotnet/auth">Authentication</a></li><li class="menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/forge-samples-docs/docs/tutorials/hubs-browser/dotnet/hubs">Browsing Hubs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/forge-samples-docs/docs/tutorials/hubs-browser/dotnet/viewer">Viewer &amp; UI</a></li></ul></li></ul></li></ul></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_1CGd"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_3E-R"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="markdown"><header><h1>Browsing Hubs</h1></header><p>In this step we&#x27;ll extend our server so that we can browse the content of 3rd party
applications built with Forge such as BIM 360 Docs or ACC.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="forge-helpers"></a>Forge helpers<a class="hash-link" href="#forge-helpers" title="Direct link to heading">#</a></h2><p>First, let&#x27;s add a couple of helper methods to <code>ForgeService</code> for browsing through
Data Management hubs, projects, folders, items, and versions. Create a <code>ForgeService.Hubs.cs</code>
under the <code>Models</code> subfolder with the following content:</p><div class="codeBlockContainer_K1bP"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_eoMF">Models/ForgeService.Hubs.cs</div><div class="codeBlockContent_hGly csharp"><pre tabindex="0" class="prism-code language-csharp codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">using System.Collections.Generic;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">using System.Threading.Tasks;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">using Autodesk.Forge;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">using Autodesk.Forge.Model;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">namespace hubsbrowser</span></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public partial class ForgeService : IForgeService</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        public async Task&lt;IEnumerable&lt;dynamic&gt;&gt; GetHubs(Tokens tokens)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            var hubs = new List&lt;dynamic&gt;();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            var api = new HubsApi();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            api.Configuration.AccessToken = tokens.InternalToken;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            var response = await api.GetHubsAsync();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            foreach (KeyValuePair&lt;string, dynamic&gt; hub in new DynamicDictionaryItems(response.data))</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                hubs.Add(hub.Value);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            return hubs;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        public async Task&lt;IEnumerable&lt;dynamic&gt;&gt; GetProjects(string hubId, Tokens tokens)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            var projects = new List&lt;dynamic&gt;();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            var api = new ProjectsApi();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            api.Configuration.AccessToken = tokens.InternalToken;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            var response = await api.GetHubProjectsAsync(hubId);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            foreach (KeyValuePair&lt;string, dynamic&gt; project in new DynamicDictionaryItems(response.data))</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                projects.Add(project.Value);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            return projects;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        public async Task&lt;IEnumerable&lt;dynamic&gt;&gt; GetContents(string hubId, string projectId, string folderId, Tokens tokens)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            var contents = new List&lt;dynamic&gt;();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (string.IsNullOrEmpty(folderId))</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                var api = new ProjectsApi();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                api.Configuration.AccessToken = tokens.InternalToken;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                var response = await api.GetProjectTopFoldersAsync(hubId, projectId);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                foreach (KeyValuePair&lt;string, dynamic&gt; folders in new DynamicDictionaryItems(response.data))</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                    contents.Add(folders.Value);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            else</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                var api = new FoldersApi();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                api.Configuration.AccessToken = tokens.InternalToken;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                var response = await api.GetFolderContentsAsync(projectId, folderId); // TODO: add paging</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                foreach (KeyValuePair&lt;string, dynamic&gt; item in new DynamicDictionaryItems(response.data))</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                    contents.Add(item.Value);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            return contents;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        public async Task&lt;IEnumerable&lt;dynamic&gt;&gt; GetVersions(string hubId, string projectId, string itemId, Tokens tokens)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            var versions = new List&lt;dynamic&gt;();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            var api = new ItemsApi();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            api.Configuration.AccessToken = tokens.InternalToken;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            var response = await api.GetItemVersionsAsync(projectId, itemId);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            foreach (KeyValuePair&lt;string, dynamic&gt; version in new DynamicDictionaryItems(response.data))</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                versions.Add(version.Value);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            return versions;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Next we&#x27;ll need to update the <code>IForgeService</code> interface in <code>Models/ForgeService.cs</code>
to make the new methods available to our server:</p><div class="codeBlockContainer_K1bP"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_eoMF">Models/ForgeService.cs</div><div class="codeBlockContent_hGly csharp"><pre tabindex="0" class="prism-code language-csharp codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">using System;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">using System.Collections.Generic;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">using System.Threading.Tasks;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">using Autodesk.Forge;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">namespace hubsbrowser</span></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public class Tokens</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        public string InternalToken;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        public string PublicToken;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        public string RefreshToken;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        public DateTime ExpiresAt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public interface IForgeService</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        string GetAuthorizationURL();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        Task&lt;Tokens&gt; GenerateTokens(string code);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        Task&lt;Tokens&gt; RefreshTokens(Tokens tokens);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        Task&lt;dynamic&gt; GetUserProfile(Tokens tokens);</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">        Task&lt;IEnumerable&lt;dynamic&gt;&gt; GetHubs(Tokens tokens);</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">        Task&lt;IEnumerable&lt;dynamic&gt;&gt; GetProjects(string hubId, Tokens tokens);</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">        Task&lt;IEnumerable&lt;dynamic&gt;&gt; GetContents(string hubId, string projectId, string folderId, Tokens tokens);</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">        Task&lt;IEnumerable&lt;dynamic&gt;&gt; GetVersions(string hubId, string projectId, string itemId, Tokens tokens);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public partial class ForgeService : IForgeService</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        private readonly string _clientId;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        private readonly string _clientSecret;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        private readonly string _callbackUri;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        private readonly Scope[] InternalTokenScopes = new Scope[] { Scope.DataRead, Scope.ViewablesRead };</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        private readonly Scope[] PublicTokenScopes = new Scope[] { Scope.ViewablesRead };</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        public ForgeService(string clientId, string clientSecret, string callbackUri)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            _clientId = clientId;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            _clientSecret = clientSecret;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            _callbackUri = callbackUri;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="server-endpoints"></a>Server endpoints<a class="hash-link" href="#server-endpoints" title="Direct link to heading">#</a></h2><p>Finally, let&#x27;s expose the new functionality to the client-side code through another ASP.NET
controller. Create a <code>HubsController.cs</code> file under the <code>Controllers</code> subfolder with the following
content:</p><div class="codeBlockContainer_K1bP"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_eoMF">Controllers/HubsController.cs</div><div class="codeBlockContent_hGly csharp"><pre tabindex="0" class="prism-code language-csharp codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">using System.Threading.Tasks;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">using Microsoft.AspNetCore.Mvc;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">using Microsoft.Extensions.Logging;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">using Newtonsoft.Json;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">namespace hubsbrowser</span></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    [ApiController]</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    [Route(&quot;api/[controller]&quot;)]</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public class HubsController : ControllerBase</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        private readonly ILogger&lt;HubsController&gt; _logger;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        private readonly IForgeService _forgeService;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        public HubsController(ILogger&lt;HubsController&gt; logger, IForgeService forgeService)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            _logger = logger;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            _forgeService = forgeService;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        [HttpGet()]</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        public async Task&lt;ActionResult&lt;string&gt;&gt; ListHubs()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            var tokens = await AuthController.PrepareTokens(Request, Response, _forgeService);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (tokens == null)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                return Unauthorized();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            var hubs = await _forgeService.GetHubs(tokens);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            return JsonConvert.SerializeObject(hubs);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        [HttpGet(&quot;{hub}/projects&quot;)]</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        public async Task&lt;ActionResult&lt;string&gt;&gt; ListProjects(string hub)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            var tokens = await AuthController.PrepareTokens(Request, Response, _forgeService);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (tokens == null)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                return Unauthorized();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            var projects = await _forgeService.GetProjects(hub, tokens);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            return JsonConvert.SerializeObject(projects);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        [HttpGet(&quot;{hub}/projects/{project}/contents&quot;)]</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        public async Task&lt;ActionResult&lt;string&gt;&gt; ListItems(string hub, string project, [FromQuery] string folder_id)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            var tokens = await AuthController.PrepareTokens(Request, Response, _forgeService);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (tokens == null)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                return Unauthorized();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            var contents = await _forgeService.GetContents(hub, project, folder_id, tokens);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            return JsonConvert.SerializeObject(contents);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        [HttpGet(&quot;{hub}/projects/{project}/contents/{item}/versions&quot;)]</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        public async Task&lt;ActionResult&lt;string&gt;&gt; ListVersions(string hub, string project, string item)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            var tokens = await AuthController.PrepareTokens(Request, Response, _forgeService);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (tokens == null)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                return Unauthorized();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            var versions = await _forgeService.GetVersions(hub, project, item, tokens);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            return JsonConvert.SerializeObject(versions);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The controller handles several endpoints for browsing the content in 3rd party Forge
applications such as BIM 360 Docs and ACC. We will make use of these endpoints when
building the UI part of the application.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="try-it-out"></a>Try it out<a class="hash-link" href="#try-it-out" title="Direct link to heading">#</a></h2><p>And that&#x27;s it for the server side. Time to try it out! Make sure you set all
the required environment variables, and run the application:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">FORGE_CLIENT_ID</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">your-own-forge-client-id</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">FORGE_CLIENT_SECRET</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">your-own-forge-client-secret</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">FORGE_CALLBACK_URL</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">https://localhost:5001/api/auth/callback</span></span><span class="token-line" style="color:#393A34"><span class="token plain">dotnet run</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>You should now be able to explore the new endpoints tha will eventually be used from
the UI. For example, if you go to https://localhost:3000/api/hubs, the server should
respond with a JSON list of all the hubs you have access to. Try copying the ID of
one of the hubs, and use it in another address: https://localhost:5001/api/hubs/your-hub-id/projects.
In this case the server application should respond with a JSON list of all projects
available under the specified hub.</p><p><img alt="Hubs Response" src="/forge-samples-docs/assets/images/hubs-response-b44bbc91659a885a92794d390ac252fb.png"></p></div><footer class="docusaurus-mt-lg"><div class="row"><div class="col"><a href="https://github.com/petrbroz/forge-samples-docs/edit/main/website/docs/tutorials/hubs-browser/dotnet/hubs.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/forge-samples-docs/docs/tutorials/hubs-browser/dotnet/auth"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Authentication</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/forge-samples-docs/docs/tutorials/hubs-browser/dotnet/viewer"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Viewer &amp; UI Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#forge-helpers" class="table-of-contents__link">Forge helpers</a></li><li><a href="#server-endpoints" class="table-of-contents__link">Server endpoints</a></li><li><a href="#try-it-out" class="table-of-contents__link">Try it out</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/forge-samples-docs/docs/intro">Tutorials</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/autodesk-forge" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/ipetrbroz" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/petrbroz/forge-samples-docs" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 Autodesk, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/forge-samples-docs/assets/js/runtime~main.4eea0c2a.js"></script>
<script src="/forge-samples-docs/assets/js/main.e5d50793.js"></script>
</body>
</html>